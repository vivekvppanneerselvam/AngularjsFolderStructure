angular.module('datePicker')
    .controller('DatePickerController', DatePickerController);

DatePickerController.$inject = ['$timeout'];

function DatePickerController($timeout) {

    var ctrl = this;

    ctrl.$onInit = $onInit;
    ctrl.applyRange = applyRange;

    function $onInit() {

        if (ctrl.isRange) {
            ctrl.type = 'range';
        } else {
            ctrl.type = 'single';
        }

        ctrl.range = {
            start: ctrl.startDate,
            end: ctrl.endDate
        };
    }

    function applyRange(start, end) {
        ctrl.startDate = moment(start).format(ctrl.format);
        ctrl.endDate = moment(end).format(ctrl.format);
        $timeout(ctrl.applyCallback, 1);
    }
}
